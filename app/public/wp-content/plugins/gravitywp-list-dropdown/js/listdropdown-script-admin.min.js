const text_drop_down_columns=itsg_listdropdown_admin_js_settings.text_drop_down_columns,text_drop_down_columns_instructions=itsg_listdropdown_admin_js_settings.text_drop_down_columns_instructions,text_make_drop_down=itsg_listdropdown_admin_js_settings.text_make_drop_down,text_drop_down_options=itsg_listdropdown_admin_js_settings.text_drop_down_options,text_enable_enhanced=itsg_listdropdown_admin_js_settings.text_enable_enhanced,text_enable_add_options=itsg_listdropdown_admin_js_settings.text_enable_add_options;function SetFieldChoicesList(e,i){let o="";const t=new Array({value:"First Choice",text:"First Choice"},{value:"Second Choice",text:"Second Choice"},{value:"Third Choice",text:"Third Choice"});if("multi"==(void 0!==field.enableColumns&&field.enableColumns?"multi":"single")){var _=void 0===(e=field.choices[i]).isDropDownChoices?t:e.isDropDownChoices,n=!(void 0===e.isDropDownEnableChoiceValue||!e.isDropDownEnableChoiceValue);if(_.length||(_=t,field.choices[i].isDropDownChoices=t),"string"==typeof _){_=itsg_gf_list_drop_down_maybe_string_to_array(_);field.choices[i].isDropDownChoices=_}}else{_=void 0===field.itsg_list_field_drop_down_options?t:field.itsg_list_field_drop_down_options,n=!(void 0===field.isDropDownEnableChoiceValue||!field.isDropDownEnableChoiceValue);if(void 0===field.itsg_list_field_drop_down_options&&(_=t,field.itsg_list_field_drop_down_options=t),"string"==typeof _){_=itsg_gf_list_drop_down_maybe_string_to_array(_);field.itsg_list_field_drop_down_options=_}}for(let e=0;e<_.length;e++){const t=String(n?_[e].value:_[e].text),s="list_choice_drop_down";o+="<li class='field-choice-row-drop-down' data-input_type='"+s+"' data-index='"+e+"'>",o+="<input type='text' id='"+s+"_choice_text_"+e+"' value=\""+String(_[e].text).replace(/"/g,"&quot;")+"\" class='field-choice-input-dropdown field-choice-text' onblur=\"SetFieldChoiceDropDown( "+i+' );" />',o+="<input type='text' id='"+s+"_choice_value_"+e+"' value=\""+t.replace(/"/g,"&quot;")+"\" class='field-choice-input-dropdown field-choice-value' onblur=\"SetFieldChoiceDropDown( "+i+' );" />',o+="<button class='field-choice-button field-choice-button--insert gf_insert_field_choice gform-choice__button gform-choice__button--add gform-st-icon gform-st-icon--circle-plus' onclick=\"InsertFieldChoiceisDropDown( "+i+","+e+');" onkeypress="InsertFieldChoiceisDropDown( '+i+","+e+');"></button>',_.length>1&&(o+="<button class='field-choice-button field-choice-button--delete gf_delete_field_choice gform-choice__button gform-choice__button--add gform-st-icon gform-st-icon--circle-minus' onclick=\"DeleteFieldChoiceisDropDown( "+i+","+e+');" onkeypress="DeleteFieldChoiceisDropDown( '+i+","+e+');"></button>'),o+="</li>"}"single"==(void 0!==field.enableColumns&&field.enableColumns?"multi":"single")&&(i="single"),jQuery(".choices_setting_"+i+" #field_choices_"+i).html(o);1==_.length?jQuery("#field_choices_"+i+" .gf_delete_field_choice").hide():jQuery("#field_choices_"+i+" .gf_delete_field_choice").show()}function itsg_gf_list_drop_down_maybe_string_to_array(e){if("string"==typeof e){e=(e=e.replace("\\,","ITSG_TEMP_DELIM")).split(",");const i=[];for(let o=0;o<e.length;o++){const t=e[o].replace("ITSG_TEMP_DELIM",",");i.push({value:t,text:t})}e=i}return e}function InsertFieldChoiceisDropDown(e,i){const o={value:"",text:""};if("multi"==(void 0!==field.enableColumns&&field.enableColumns?"multi":"single")){const t=field.choices[e];itsg_gf_list_drop_down_maybe_string_to_array(void 0===t.isDropDownChoices?o:t.isDropDownChoices).splice(i+1,0,o),SetFieldChoicesList(field.choices[e],e)}else{itsg_gf_list_drop_down_maybe_string_to_array(void 0===field.itsg_list_field_drop_down_options?o:field.itsg_list_field_drop_down_options).splice(i+1,0,o),SetFieldChoicesList(field,e)}}function DeleteFieldChoiceisDropDown(e,i){if("multi"==(void 0!==field.enableColumns&&field.enableColumns?"multi":"single")){const o=field.choices[e];itsg_gf_list_drop_down_maybe_string_to_array(void 0===o.isDropDownChoices?"":o.isDropDownChoices).splice(i,1),SetFieldChoicesList(field.choices[e],e)}else{itsg_gf_list_drop_down_maybe_string_to_array(void 0===field.itsg_list_field_drop_down_options?"":field.itsg_list_field_drop_down_options).splice(i,1),SetFieldChoicesList(field,e)}}function SetFieldChoiceDropDown(e){const i=void 0!==field.enableColumns&&field.enableColumns?"multi":"single";"single"==i&&(e="single");const o=jQuery("#list_choice_dropdown_enable_"+e).is(":checked"),t=jQuery("#list_choice_dropdown_enhanced_"+e).is(":checked"),_=jQuery("#list_choice_values_enabled_"+e).is(":checked");field=GetSelectedField();const n=[];if(jQuery(".choices_setting_"+e+" li.field-choice-row-drop-down").each((function(){const e=jQuery(this).find("input.field-choice-text").val(),i=jQuery(this).find("input.field-choice-value").val();n.push({value:i,text:e})})),"multi"==i){const i=field.choices[e];i.isDropDown=o,i.isDropDownChoices=n,i.isDropDownEnhanced=t,i.isDropDownEnableChoiceValue=_}else field.itsg_list_field_drop_down=o,field.itsg_list_field_drop_down_options=n,field.itsg_list_field_drop_down_enhanced=t,field.isDropDownEnableChoiceValue=_;LoadBulkChoices(field),UpdateFieldChoices(GetInputType(field)),itsg_gf_list_drop_down_preview(field),itsg_gf_list_drop_down_displayed_options(e)}function itsg_gf_list_drop_down_preview(e){setTimeout((function(){if(e.enableColumns)for(let o=0;o<e.choices.length;o++){if(jQuery("#list_choice_dropdown_enable_"+o).is(":checked")){var i=jQuery('<select style="width:100%" disabled="">');const t=o+1;jQuery("li#field_"+e.id+" table.gfield_list_container tbody tr td:nth-child("+t+")").html(i)}}else{if(e.itsg_list_field_drop_down)i=jQuery('<td><select style="width:100%" disabled=""></td>');else i=jQuery('<td><input type="text" style="width:100%" disabled=""></td>');jQuery("li#field_"+e.id+" table.gfield_list_container tbody tr select").remove(),jQuery("li#field_"+e.id+" table.gfield_list_container tbody tr input").remove(),jQuery("li#field_"+e.id+" table.gfield_list_container tbody tr").prepend(i)}}),50)}function itsg_gf_list_drop_down_displayed_options(e){jQuery("#list_choice_dropdown_enable_"+e).is(":checked"),jQuery("#list_choice_dropdown_enhanced_"+e).is(":checked");jQuery("#list_choice_values_enabled_"+e).is(":checked")?jQuery(".choices_setting_"+e).addClass("choice_with_value"):jQuery(".choices_setting_"+e).removeClass("choice_with_value")}function itsg_gf_list_drop_down_init(){setTimeout((function(){itsg_gf_list_drop_down_preview(field);if("list"==GetInputType(field))if(field.enableColumns){jQuery(".list_drop_down_settings").hide();for(var e=0;e<field.choices.length;e++){if(i=field.choices[e].isDropDown){if(!jQuery("#list_choice_dropdown_options .choices_setting_"+e).length){const i=jQuery(".choices_setting").first().prop("outerHTML").replace(/"choices_setting/g,'"choices_setting_'+e).replace(/"field_choices"/g,"'field_choices_"+e+"' data-index='"+e+"'").replace("gfield_settings_choices_container","gfield_settings_choices_container_"+e).replace("ToggleChoiceValue();","").replace("SetFieldChoices();","").replace("SetFieldProperty('enableChoiceValue', this.checked)","SetFieldChoiceDropDown("+e+")").replace(/"field_choice_values_enabled"/g,"list_choice_values_enabled_"+e);jQuery(".list_choice_dropdown_options_"+e).prepend(i),jQuery(".choices_setting_"+e+" a.gf_tooltip").remove(),jQuery(".choices_setting_"+e).find('.choices-ui__section[data-type="bulk-choices"]').remove(),SetFieldChoicesList(field.choices[e],e),jQuery(".choices_setting_"+e).show()}jQuery(".list_choice_dropdown_options_"+e).show();var i=void 0!==field.choices[e].isDropDown&&field.choices[e].isDropDown,o=void 0!==field.choices[e].isDropDownChoices?field.choices[e].isDropDownChoices:"",t=void 0!==field.choices[e].isDropDownEnhanced&&field.choices[e].isDropDownEnhanced,_=void 0!==field.choices[e].isDropDownEnableChoiceValue&&field.choices[e].isDropDownEnableChoiceValue;jQuery("#field_columns #list_choice_dropdown_enable_"+e).prop("checked",i),jQuery("#field_columns #list_choice_dropdown_options_"+e).val(o),jQuery("#field_columns #list_choice_dropdown_enhanced_"+e).prop("checked",t),t&&0===jQuery("#field_columns #list_choice_dropdown_enhanced_warning_"+e).length&&jQuery("#field_columns #list_choice_dropdown_enhanced_"+e).parent().append("<div id=list_choice_dropdown_enhanced_warning_"+e+' class="gform-alert gform-alert--accessibility gform-alert--inline"><span class="gform-alert__icon gform-icon gform-icon--accessibility" aria-hidden="true"></span><div class="gform-alert__message-wrap"><p class="gform-alert__message">The Enhanced User Interface is not accessible for screen reader users and people who cannot use a mouse.</p><a class="gform-alert__cta gform-button gform-button--white gform-button--size-xs" href="https://docs.gravityforms.com/field-accessibility-warning" target="_blank">Learn more</a></div></div>'),t||jQuery("#field_columns #list_choice_dropdown_enhanced_warning_"+e).remove(),jQuery("#field_columns #list_choice_values_enabled_"+e).prop("checked",_),itsg_gf_list_drop_down_displayed_options(e)}else jQuery(".list_choice_dropdown_options_"+e).hide()}}else{jQuery(".list_drop_down_settings").show();e=0,i=void 0!==field.itsg_list_field_drop_down&&field.itsg_list_field_drop_down,o=void 0!==field.itsg_list_field_drop_down_options?field.itsg_list_field_drop_down_options:"",t=void 0!==field.itsg_list_field_drop_down_enhanced&&field.itsg_list_field_drop_down_enhanced,_=void 0!==field.isDropDownEnableChoiceValue&&field.isDropDownEnableChoiceValue;jQuery(".list_drop_down_settings #list_choice_dropdown_enable_single").prop("checked",i),jQuery(".list_drop_down_settings #list_choice_dropdown_options_single").val(o),jQuery(".list_drop_down_settings #list_choice_dropdown_enhanced_single").prop("checked",t),jQuery(".list_drop_down_settings #list_choice_values_enabled_single").prop("checked",_),i?(jQuery("#list_choice_dropdown_options .choices_setting_"+e).length||(SetFieldChoicesList(field,e),jQuery(".choices_setting_"+e).show()),jQuery("#list_drop_down_options").show(),itsg_gf_list_drop_down_displayed_options("single")):jQuery("#list_drop_down_options").hide()}}),50)}function ToggleListChoicesAccessibilityWarning(e){}!function(e){const i=e.GetFieldChoices;e.GetFieldChoices=function(){let e=i.apply(this,[field]);if(!field.choices||0===Object.keys(field.choices).length)return"";for(let i=0;i<field.choices.length;i++){const o=GetInputType(field),t=field.choices[i].isDropDown?"checked":"",_=field.choices[i].isDropDownEnhanced?"checked":"",n=field.enableChoiceValue?String(field.choices[i].value):field.choices[i].text;"list"==o&&(0==i&&(e+="<p><strong>"+text_drop_down_columns+"</strong><br>"+text_drop_down_columns_instructions+"</p>"),e+="<div id='list_choice_dropdown_options' class=gwp_list_drop_down_settings>",e+="<input type='checkbox' name='choice_dropdown_enable' id='list_choice_dropdown_enable_"+i+"' "+t+' onclick="SetFieldChoiceDropDown( '+i+' );itsg_gf_list_drop_down_init();" /> ',e+="<label class='inline' for='list_choice_dropdown_enable_"+i+"'>"+n+" - "+text_make_drop_down+"</label>",e+="<div style='display:none; background: rgb(244, 244, 244) none repeat scroll 0px 0px; padding: 10px; border-bottom: 1px solid grey; margin: 10px 0;' class='list_choice_dropdown_options_"+i+"'>",e+="<br>",e+="<input type='checkbox' name='choice_dropdown_enhanced' id='list_choice_dropdown_enhanced_"+i+"' "+_+' onclick="SetFieldChoiceDropDown( '+i+' );itsg_gf_list_drop_down_init();"  >',e+="<label class='inline' for='list_choice_dropdown_enhanced_"+i+"'>",e+=text_enable_enhanced+"</label>",e+="<br>",e+="</div>",e+="</div>")}return itsg_gf_list_drop_down_init(),e}}(window||{}),jQuery(document).on("change","#gfield_settings_columns_container #field_columns li",(function(){itsg_gf_list_drop_down_init()})),jQuery(document).on("change","#field_settings input[id=field_columns_enabled]",(function(){itsg_gf_list_drop_down_init()})),jQuery(document).bind("gform_load_field_settings",(function(e,i,o){itsg_gf_list_drop_down_init()}));